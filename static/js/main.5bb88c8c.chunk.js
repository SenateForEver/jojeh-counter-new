(this["webpackJsonpjojeh-counter-new"]=this["webpackJsonpjojeh-counter-new"]||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(15),s=n.n(a),i=(n(35),n(11)),o=n.n(i),l=n(12),u=n(19),d=n(8),j=n(14),b=j.a.apps.length>0?j.a.app():j.a.initializeApp({apiKey:"AIzaSyCO5cHSLl5YTuMBEUUk700TwF51V9yWmh0",authDomain:"senate-parliment.firebaseapp.com",projectId:"senate-parliment",storageBucket:"senate-parliment.appspot.com",messagingSenderId:"53003340230",appId:"1:53003340230:web:4674ac60a692c02f0acac7",measurementId:"G-5L9TBVLHVE"}),f=n(27),O=n.n(f);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var m=c.createElement("g",null,c.createElement("g",null,c.createElement("polygon",{points:"225.813,48.907 128,146.72 30.187,48.907 0,79.093 128,207.093 256,79.093  "})));function x(e,t){var n=e.title,r=e.titleId,a=p(e,["title","titleId"]);return c.createElement("svg",h({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 256 256",style:{enableBackground:"new 0 0 256 256"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,m)}var v,g,w,k=c.forwardRef(x),y=(n.p,n(16)),C=(n(42),n(20)),S=n.n(C),N=n(17),E=n(9),F=n(3),D=r.a.createContext(null),I=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(d.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)({chickens:[],users:{},logs:{},roles:{},meetings:{}}),u=Object(d.a)(i,2),j=u[0],f=u[1],O=b.firestore(),h=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),t={chickens:[],users:{},logs:{},roles:{},meetings:{}},e.next=4,O.collection("users").get();case 4:return(n=e.sent).forEach((function(e){t.users[e.id]=Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})})),e.next=8,O.collection("chickens").get();case 8:return n=e.sent,c=0,n.forEach((function(e){t.chickens.push(Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})),t.chickens[c++].user=t.users[e.data().user_id]})),e.next=13,O.collection("logs").get();case 13:return(n=e.sent).forEach((function(e){t.logs[e.id]=Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})})),e.next=17,O.collection("roles").get();case 17:return(n=e.sent).forEach((function(e){t.roles[e.id]=Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})})),e.next=21,O.collection("meetings").get();case 21:(n=e.sent).forEach((function(e){t.meetings[e.id]=Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})})),f(t),s(!1);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,O.collection("users").get();case 3:e.sent.forEach((function(e){t[e.id]=Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})})),f((function(e){return Object(E.a)(Object(E.a)({},e),{},{users:t})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s(!0),e.next=4,O.collection("chickens").get();case 4:n=e.sent,c=0,n.forEach((function(e){t.push(Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id})),t[c++].user=j.users[e.data().user_id]})),f((function(e){return Object(E.a)(Object(E.a)({},e),{},{chickens:t})})),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){h()}),[]),Object(F.jsx)(D.Provider,{value:{data:j,setData:f,isLoading:a,setIsLoading:s,fetchAll:h,fetchChickens:m,fetchUsers:p},children:t})},B=function(e){var t=e.name,n=e.count,r=e.description,a=e.date,s=e.status,i=e.isHeader,o=void 0!==i&&i,l=e.isAdmin,u=void 0!==l&&l,j=e.onClick,b=a;"number"===typeof a&&(b=O()(new Date(1e3*a)).locale("fa").format("YYYY/MM/DD"));var f=Object(c.useState)(!1),h=Object(d.a)(f,2),p=h[0],m=h[1];return Object(F.jsxs)("div",{onClick:function(){m(!p)},className:"table-row ".concat(o&&"is-head"),children:[Object(F.jsxs)("div",{className:"row-columns",children:[Object(F.jsx)("div",{children:t}),Object(F.jsx)("div",{children:n}),Object(F.jsx)("div",{children:b}),Object(F.jsx)("div",{children:s?"\u062f\u0627\u062f\u0647":"\u0646\u062f\u0627\u062f\u0647"}),Object(F.jsx)("div",{onClick:j,children:o?u?"+":"#":Object(F.jsx)(k,{className:"arrow-icon ".concat(p&&"active")})})]}),!o&&p&&Object(F.jsx)("div",{className:"row-description",children:r})]})},L=S.a.styled(v||(v=Object(u.a)(["\n  max-width: 1100px;\n  width: 90%;\n  background-color: white;\n  margin: 100px auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  opacity: ",";\n  transition : all 0.3s ease-in-out;"])),(function(e){return e.opacity})),M=function(e){var t,n=e.close,r=b.firestore(),a=Object(c.useContext)(D),s=a.fetchUsers,i=a.data,u=Object(c.useState)(null),j=Object(d.a)(u,2),f=j[0],O=j[1],h=Object(c.useState)(""),p=Object(d.a)(h,2),m=p[0],x=p[1],v=Object(c.useState)(""),g=Object(d.a)(v,2),w=g[0],k=g[1],y=Object(c.useState)(""),C=Object(d.a)(y,2),S=C[0],N=(C[1],{"\u0628\u062f\u0647":1,"\u0628\u06af\u06cc\u0631":2}),E=function(){var e=Object(l.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r.collection("users").doc(f.id).set({address:m,"full name":w,joje_count:0,role:null!==(c=N[S])&&void 0!==c?c:1});case 3:s(),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object.keys(i.users).map((function(e){return i.users[e]}));return Object(F.jsxs)("div",{className:"form-container",children:[Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"users",children:"\u0634\u062e\u0635"}),Object(F.jsxs)("select",{id:"users",value:null!==(t=null===f||void 0===f?void 0:f.id)&&void 0!==t?t:"",onChange:function(e){var t=i.users[e.target.value];O(t),k(t["full name"]),x(t.address)},children:[Object(F.jsx)("option",{value:"",disabled:!0,children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646"}),I.map((function(e){return Object(F.jsx)("option",{value:e.id,children:e["full name"]},e.id)}))]})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"fullname",children:"\u0646\u0627\u0645 \u06a9\u0627\u0645\u0644"}),Object(F.jsx)("input",{type:"text",id:"fullname",disabled:null===f?"disabled":"",value:w,onChange:function(e){return k(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"address",children:"\u0622\u062f\u0631\u0633"}),Object(F.jsx)("input",{type:"text",id:"address",disabled:null===f?"disabled":"",value:m,onChange:function(e){return x(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"role",children:"\u0646\u0642\u0634"}),Object(F.jsx)("input",{type:"text",id:"role",disabled:!0,value:"\u0628\u062f\u0647"})]}),Object(F.jsx)("div",{className:"form-row",children:Object(F.jsx)("button",{onClick:E,disabled:null==f?"disabled":"",children:"\u0627\u0631\u0633\u0627\u0644"})})]})},P=function(e){var t=e.close,n=b.firestore(),r=Object(c.useContext)(D).fetchUsers,a=Object(c.useState)(""),s=Object(d.a)(a,2),i=s[0],u=s[1],j=Object(c.useState)(""),f=Object(d.a)(j,2),O=f[0],h=f[1],p=Object(c.useState)(""),m=Object(d.a)(p,2),x=m[0],v=(m[1],{"\u0628\u062f\u0647":1,"\u0628\u06af\u06cc\u0631":2}),g=function(){var e=Object(l.a)(o.a.mark((function e(c){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n.collection("users").add({address:i,"full name":O,joje_count:0,role:null!==(a=v[x])&&void 0!==a?a:1});case 3:r(),t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"form-container",children:[Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"fullname",children:"\u0646\u0627\u0645 \u06a9\u0627\u0645\u0644"}),Object(F.jsx)("input",{type:"text",id:"fullname",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"address",children:"\u0622\u062f\u0631\u0633"}),Object(F.jsx)("input",{type:"text",id:"address",value:i,onChange:function(e){return u(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"role",children:"\u0646\u0642\u0634"}),Object(F.jsx)("input",{type:"text",id:"role",disabled:!0,value:"\u0628\u062f\u0647"})]}),Object(F.jsx)("div",{className:"form-row",children:Object(F.jsx)("button",{onClick:g,children:"\u0627\u0631\u0633\u0627\u0644"})})]})},T=function(e){var t=e.close,n=b.firestore(),r=Object(c.useContext)(D),a=r.fetchChickens,s=r.data,i=Object(c.useState)(0),u=Object(d.a)(i,2),f=u[0],O=u[1],h=Object(c.useState)(null),p=Object(d.a)(h,2),m=p[0],x=p[1],v=Object(c.useState)(""),g=Object(d.a)(v,2),w=g[0],k=g[1],y=Object(c.useState)(""),C=Object(d.a)(y,2),S=C[0],N=C[1],E=function(){var e=Object(l.a)(o.a.mark((function e(c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n.collection("chickens").add({chicken_count:f,date:j.a.firestore.Timestamp.fromMillis(null!==m&&void 0!==m?m:(new Date).getTime()),description:S,status:!1,user_id:w});case 3:a(),t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){window.$("#date").persianDatepicker({format:"YYYY/MM/DD",onSelect:function(e){x(e),console.log(e,j.a.firestore,j.a)}})}),[]);var I=Object.keys(s.users).map((function(e){return s.users[e]}));return Object(F.jsxs)("div",{className:"form-container",children:[Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"users",children:"\u0634\u062e\u0635"}),Object(F.jsx)("select",{id:"users",value:w,onChange:function(e){return k(e.target.value)},children:I.map((function(e){return Object(F.jsx)("option",{value:e.id,children:e["full name"]},e.id)}))})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"description",children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),Object(F.jsx)("input",{type:"text",id:"description",value:S,onChange:function(e){return N(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"date",children:"\u062a\u0627\u0631\u06cc\u062e"}),Object(F.jsx)("input",{type:"text",id:"date"})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsx)("label",{htmlFor:"count",children:"\u062a\u0639\u062f\u0627\u062f"}),Object(F.jsx)("input",{type:"text",id:"count",value:f,onChange:function(e){return O(e.target.value)}})]}),Object(F.jsx)("div",{className:"form-row",children:Object(F.jsx)("button",{onClick:E,children:"\u0627\u0631\u0633\u0627\u0644"})})]})};function U(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(d.a)(a,2),i=s[0],o=s[1],l=Object(c.useState)(""),j=Object(d.a)(l,2),b=j[0],f=j[1];function O(e){o(0),r(!n)}var h=N.default.div(g||(g=Object(u.a)(["\n      width: 100%;\n      display: flex;\n      padding: 20px 0;\n      justify-content: center;\n    "])));return Object(F.jsxs)(h,{children:[Object(F.jsx)("button",{onClick:O,children:"Open modal"}),Object(F.jsxs)(L,{isOpen:n,afterOpen:function(){setTimeout((function(){o(1)}),100)},beforeClose:function(){return new Promise((function(e){o(0),setTimeout(e,300)}))},onBackgroundClick:O,onEscapeKeydown:O,opacity:i,backgroundProps:{opacity:i},children:[Object(F.jsx)("button",{onClick:function(){f("user")},children:"Add User"}),Object(F.jsx)("button",{onClick:function(){f("chickens")},children:"Add Chicken"}),Object(F.jsx)("button",{onClick:function(){f("editUser")},children:"Edit User"}),"user"===b&&Object(F.jsx)(P,{close:function(){return f("")}}),"chickens"===b&&Object(F.jsx)(T,{close:function(){return f("")}}),"editUser"===b&&Object(F.jsx)(M,{close:function(){return f("")}}),Object(F.jsx)("button",{onClick:O,children:"Close me"})]})]})}var Y=Object(N.default)(C.BaseModalBackground)(w||(w=Object(u.a)(["\n  opacity: ",";\n  transition: all 0.3s ease-in-out;\n"])),(function(e){return e.opacity})),_=function(){var e=Object(c.useState)(0),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(d.a)(a,2),i=s[0],o=s[1],l=Object(c.useContext)(D),u=l.data,j=l.isLoading;console.log("object",u);return Object(F.jsx)(C.ModalProvider,{backgroundComponent:Y,children:Object(F.jsxs)("div",{className:"main",children:[Object(F.jsx)("h1",{children:"\u0633\u0646\u0627 \u0628\u0631\u0627\u06cc \u0647\u0645\u0647\u060c \u0647\u0645\u0647 \u0628\u0631\u0627\u06cc \u0633\u0646\u0627"}),i&&Object(F.jsx)(U,{}),Object(F.jsxs)("div",{className:"table",children:[Object(F.jsx)(B,{isHeader:!0,name:"\u0646\u0627\u0645",description:"\u0628\u0631\u0627\u06cc \u0686\u06cc",count:"\u0686\u0642\u062f\u0631 \u0628\u0627\u06cc\u062f \u0628\u0647 \u0633\u0644\u0641\u0647",status:"\u0648\u0636\u0639\u06cc\u062a",date:"\u062a\u0627\u0631\u06cc\u062e",onClick:function(){if(!i){if(8===n){var e=prompt("\u0627\u0633\u0645 \u062e\u0633\u06cc\u0633\u0647 \u062c\u0645\u0639 \u0631\u0648 \u0628\u06af\u0648");if(!e||"amin"!==e.toLowerCase())return;return y.b.success("\u062d\u0627\u0644\u0627 \u062a\u0648 \u067e\u0627\u0686\u0647 \u0645\u0644\u062a \u0628\u06a9\u0646 \u0634\u06cc\u0631\u06cc\u0646\u06cc \u0631\u0648"),void o(!0)}r(n+1),n>3&&y.b.dark("".concat(8-n,"  \u0628\u0627\u0631 \u062f\u06cc\u06af\u0647 \u0645\u0648\u0646\u062f\u0647"))}},isAdmin:i}),Object(F.jsx)("div",{children:j&&"loading"}),!j&&u.chickens.length>0&&u.chickens.map((function(e){var t;return Object(F.jsx)(B,{count:e.chicken_count,date:e.date.seconds,name:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t["full name"],description:e.description},e.id)}))]})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(45);s.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsxs)(I,{children:[Object(F.jsx)(_,{}),Object(F.jsx)(y.a,{})]})}),document.getElementById("root")),A()}},[[46,1,2]]]);
//# sourceMappingURL=main.5bb88c8c.chunk.js.map